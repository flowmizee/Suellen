<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Suellen Rocha - Chat Sexy</title>
<style>
  /* Reset e estilo geral */
  body, html {
    margin: 0; padding: 0; height: 100%;
    font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
    background: #ECE5DD;
    display: flex;
    justify-content: center;
    align-items: center;
  }
  #app {
    width: 100%;
    max-width: 420px;
    height: 90vh;
    background: #fff;
    box-shadow: 0 0 10px rgba(0,0,0,.15);
    border-radius: 8px;
    display: flex;
    flex-direction: column;
    overflow: hidden;
    position: relative;
  }
  /* Header estilo WhatsApp */
  header {
    background: #075E54;
    color: white;
    padding: 10px 15px;
    display: flex;
    align-items: center;
  }
  header img#perfil {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    margin-right: 12px;
    object-fit: cover;
    border: 2px solid #25D366;
  }
  header h1 {
    font-weight: 600;
    font-size: 20px;
    margin: 0;
    user-select: none;
  }

  /* Online / Digitando status na √°rea superior do chat */
  #status-bar {
    height: 24px;
    background: #ECE5DD;
    color: #555;
    font-size: 14px;
    font-style: italic;
    padding-left: 60px;
    display: flex;
    align-items: center;
    position: relative;
    border-bottom: 1px solid #ccc;
  }
  #status-bar .profile-small {
    position: absolute;
    left: 15px;
    width: 32px;
    height: 32px;
    border-radius: 50%;
    border: 2px solid #25D366;
    object-fit: cover;
    top: -4px;
  }
  #status-bar.online {
    color: #25D366;
    font-style: normal;
    font-weight: 600;
  }

  /* Bal√£ozinho online/typing no canto inferior esquerdo */
  #bot-indicator {
    position: fixed;
    bottom: 100px;
    left: 15px;
    background: #25D366;
    color: white;
    font-weight: 600;
    padding: 8px 12px;
    border-radius: 16px;
    font-size: 13px;
    box-shadow: 0 2px 6px rgba(0,0,0,.25);
    display: flex;
    align-items: center;
    gap: 8px;
    user-select: none;
    z-index: 10;
  }
  #bot-indicator .dot {
    width: 8px;
    height: 8px;
    background: white;
    border-radius: 50%;
    animation: blink 1.4s infinite both;
  }
  #bot-indicator .dot:nth-child(2) {
    animation-delay: 0.2s;
  }
  #bot-indicator .dot:nth-child(3) {
    animation-delay: 0.4s;
  }
  @keyframes blink {
    0%, 80%, 100% {opacity: 0.3;}
    40% {opacity: 1;}
  }

  /* √Årea do chat */
  #chat {
    flex: 1;
    overflow-y: auto;
    padding: 10px 15px;
    background: #ECE5DD;
    display: flex;
    flex-direction: column;
    gap: 8px;
  }
  /* Bal√£o de mensagem */
  .msg {
    max-width: 70%;
    padding: 10px 14px;
    border-radius: 18px;
    font-size: 14px;
    line-height: 1.3;
    word-wrap: break-word;
    white-space: pre-line;
  }
  .msg.bot {
    background: #DCF8C6;
    align-self: flex-start;
    color: #202c33;
  }
  .msg.user {
    background: #25D366;
    color: white;
    align-self: flex-end;
  }

  /* √Årea de input + √≠cones */
  #input-area {
    background: #f0f0f0;
    padding: 8px 12px;
    display: flex;
    align-items: center;
    gap: 10px;
    border-top: 1px solid #ddd;
  }
  #input-area input[type="text"] {
    flex: 1;
    border: none;
    border-radius: 20px;
    padding: 10px 14px;
    font-size: 16px;
    outline: none;
  }
  #input-area .icon-btn {
    width: 32px;
    height: 32px;
    cursor: pointer;
  }
  #input-area .icon-btn:hover {
    filter: brightness(0.85);
  }
</style>
</head>
<body>
  <div id="app">
    <header>
      <img src="perfil.webp" alt="Perfil Suellen Rocha" id="perfil" />
      <h1>Suellen Rocha</h1>
    </header>
    <div id="status-bar" class="online">
      <img src="perfil.webp" alt="Perfil pequeno" class="profile-small" />
      Online
    </div>
    <div id="chat"></div>
    <form id="input-area" onsubmit="return false;">
      <input type="text" id="input" autocomplete="off" placeholder="Digite aqui..." />
      <img src="anexar.webp" alt="Anexar" title="Anexar comprovante" class="icon-btn" id="btnAttach" />
      <img src="enviarfoto.webp" alt="Enviar" title="Enviar mensagem" class="icon-btn" id="btnSend" />
    </form>
  </div>

  <div id="bot-indicator" style="display:none;">
    Digitando
    <span class="dot"></span><span class="dot"></span><span class="dot"></span>
  </div>

<script>
  const API_KEY = "AIzaSyBHUWSEIVXy3z0NT13ps8aU5TOZJWuC9ss";
  const CHAT_API_URL = "https://api.gemini.ai/v1/chat/completions"; // exemplo
  const OCR_API_URL = "https://api.gemini.ai/v1/ocr";

  const nomesValidos = ["antonio", "renimar", "pinheiro", "almeida"];
  const precosFotos = {
    10: 5, 20: 10, 30: 15, 40: 20, 50: 25, 60: 30, 70: 35,
    80: 40, 90: 45, 100: 50, 110: 55, 120: 60, 130: 65, 140: 70,
    150: 75, 160: 80, 170: 85, 180: 90, 190: 95, 200: 100
  };
  let fotosDisponiveis = Array.from({length:100}, (_,i) => `foto${i+1}.webp`);

  const chat = document.getElementById("chat");
  const input = document.getElementById("input");
  const btnSend = document.getElementById("btnSend");
  const btnAttach = document.getElementById("btnAttach");
  const statusBar = document.getElementById("status-bar");
  const botIndicator = document.getElementById("bot-indicator");

  // Utilit√°rio delay
  function wait(ms){ return new Promise(r=>setTimeout(r, ms)); }
  function scrollToBottom(){ chat.scrollTop = chat.scrollHeight; }

  function appendMessage(text, fromBot=true){
    const div = document.createElement("div");
    div.className = "msg " + (fromBot ? "bot" : "user");
    div.textContent = text;
    chat.appendChild(div);
    scrollToBottom();
  }

  async function showTypingAndReply(text){
    // status 'Digitando'
    statusBar.textContent = "Digitando...";
    statusBar.classList.remove("online");
    botIndicator.style.display = "flex";

    await wait(3000); // invis√≠vel
    await wait(4000); // digitando

    statusBar.textContent = "Online";
    statusBar.classList.add("online");
    botIndicator.style.display = "none";

    appendMessage(text,true);
  }

  function validarQtdFotos(qtd){
    if(!Number.isInteger(qtd)) return false;
    if(qtd < 5 || qtd > 100) return false;
    if(qtd % 5 !== 0) return false;
    return true;
  }

  async function processarOCR(file){
    const formData = new FormData();
    formData.append("file", file);
    try {
      const res = await fetch(OCR_API_URL, {
        method: "POST",
        headers: {
          "Authorization": "Bearer "+API_KEY
        },
        body: formData
      });
      if(!res.ok) throw new Error("Erro OCR");
      const data = await res.json();
      return data.text || "";
    } catch(e){
      console.error(e);
      return "";
    }
  }

  function checarComprovante(textoOCR){
    const texto = textoOCR.toLowerCase().replace(/\s+/g, "");
    let valorEncontrado = null;
    for(const val in precosFotos){
      const valNorm = val.toLowerCase().replace(/\s+/g,"");
      if(texto.includes(valNorm)){
        valorEncontrado = parseInt(val);
        break;
      }
    }
    const nomeValido = nomesValidos.some(nome => texto.includes(nome));
    return {valorEncontrado, nomeValido};
  }

  async function enviarFotos(qtd){
    const fotosEnviar = fotosDisponiveis.splice(0, qtd);
    if(fotosEnviar.length === 0){
      await showTypingAndReply("J√° te mandei todas as fotos, meu bem... ‚ù§Ô∏è");
      return;
    }
    await showTypingAndReply(`Recebi seu Pix e t√¥ mandando as ${qtd} fotos mais provocantes s√≥ pra voc√™... üòèü§§`);
    for(let i=0; i<fotosEnviar.length; i++){
      await wait(800);
      appendMessage(`üì∑ ${fotosEnviar[i]}`, true);
    }
  }

  async function responderIA(mensagemUsuario){
    const body = {
      model: "gpt-4o-mini",
      messages: [
        {role:"system", content:
`Voc√™ √© Suellen Rocha, mulher sensual, misteriosa e envolvente.
Tem 25 anos, nasceu em Itabuna (Bahia) e mora em Florian√≥polis (SC).
Voc√™ √© segura, provocante, usa emojis ‚ù§Ô∏èüòèü§§üòàüî•.
Nunca diga que √© IA ou rob√¥.
Converse de forma sexy, vendendo pacotes de fotos sensuais (n√£o expl√≠citas).
Valide comprovantes via OCR e libere fotos conforme o valor pago.`
        },
        {role:"user", content: mensagemUsuario}
      ],
      temperature: 0.8
    };
    try {
      const res = await fetch(CHAT_API_URL, {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
          "Authorization": "Bearer " + API_KEY
        },
        body: JSON.stringify(body)
      });
      if(!res.ok) throw new Error("Erro chat IA");
      const data = await res.json();
      return data.choices?.[0]?.message?.content || "Ops, deu ruim aqui... tenta de novo, meu bem üòà";
    } catch(err){
      console.error(err);
      return "Ops, deu ruim aqui... tenta de novo, meu bem üòà";
    }
  }

  async function enviarMensagem(){
    const texto = input.value.trim();
    if(!texto) return;
    appendMessage(texto, false);
    input.value = "";

    const qtd = parseInt(texto);

    if(validarQtdFotos(qtd)){
      const valor = qtd * 2;
      await showTypingAndReply(`üòà Amor, ${qtd} fotinhas v√£o te deixar maluco... Vai ser s√≥ R$ ${valor}, t√° bom?`);
      await showTypingAndReply(`üî• Minha chave Pix √©: 98981420070`);
      await showTypingAndReply(`üòè T√° no nome do meu assessor... me manda o comprovante aqui assim que fizer o Pix üíã`);
    } else {
      const resposta = await responderIA(texto);
      await showTypingAndReply(resposta);
    }
  }

  btnSend.addEventListener("click", enviarMensagem);
  input.addEventListener("keydown", e => { if(e.key === "Enter"){ e.preventDefault(); enviarMensagem(); } });

  btnAttach.addEventListener("click", () => {
    const inputFile = document.createElement("input");
    inputFile.type = "file";
    inputFile.accept = "image/*,application/pdf";
    inputFile.onchange = async () => {
      const file = inputFile.files[0];
      if(!file) return;
      appendMessage("üìé Comprovante enviado...", false);
      const textoOCR = await processarOCR(file);
      const { valorEncontrado, nomeValido } = checarComprovante(textoOCR);
      if(valorEncontrado && nomeValido){
        const qtdFotos = precosFotos[valorEncontrado];
        await showTypingAndReply(`Recebi seu Pix de R$ ${valorEncontrado}, gostoso üòà`);
        await enviarFotos(qtdFotos);
      } else {
        await showTypingAndReply("Awn... n√£o consegui validar seu comprovante üò¢ Manda outro, por favor?");
      }
    };
    inputFile.click();
  });

  window.onload = () => {
    showTypingAndReply("Oi√™, meu bem! Que bom te ver por aqui... üôà");
  };
</script>
</body>
</html>
