<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Suellen Rocha - Chat Sexy</title>
<style>
  /* Reset e estilo geral */
  body, html {
    margin: 0; padding: 0; height: 100%;
    font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
    background: #ECE5DD;
    display: flex;
    justify-content: center;
    align-items: center;
  }
  #app {
    width: 100%;
    max-width: 420px;
    height: 90vh;
    background: #fff;
    box-shadow: 0 0 10px rgba(0,0,0,.15);
    border-radius: 8px;
    display: flex;
    flex-direction: column;
    overflow: hidden;
  }
  /* Header estilo WhatsApp */
  header {
    background: #075E54;
    color: white;
    padding: 10px 15px;
    display: flex;
    align-items: center;
  }
  header img#perfil {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    margin-right: 12px;
    object-fit: cover;
    border: 2px solid #25D366;
  }
  header h1 {
    font-weight: 600;
    font-size: 20px;
    margin: 0;
    user-select: none;
  }

  /* √Årea do chat */
  #chat {
    flex: 1;
    overflow-y: auto;
    padding: 10px 15px;
    background: #ECE5DD;
    display: flex;
    flex-direction: column;
    gap: 8px;
  }
  /* Bal√£o de mensagem */
  .msg {
    max-width: 70%;
    padding: 10px 14px;
    border-radius: 18px;
    font-size: 14px;
    line-height: 1.3;
    word-wrap: break-word;
    white-space: pre-line;
  }
  .msg.bot {
    background: #DCF8C6;
    align-self: flex-start;
    color: #202c33;
  }
  .msg.user {
    background: #25D366;
    color: white;
    align-self: flex-end;
  }
  /* Indicador de digita√ß√£o */
  #typing {
    font-style: italic;
    font-size: 13px;
    color: #555;
    margin-left: 5px;
    display: none;
  }

  /* √Årea de input + √≠cones */
  #input-area {
    background: #f0f0f0;
    padding: 8px 12px;
    display: flex;
    align-items: center;
    gap: 10px;
    border-top: 1px solid #ddd;
  }
  #input-area input[type="text"] {
    flex: 1;
    border: none;
    border-radius: 20px;
    padding: 10px 14px;
    font-size: 16px;
    outline: none;
  }
  #input-area .icon-btn {
    width: 32px;
    height: 32px;
    cursor: pointer;
  }
  #input-area .icon-btn:hover {
    filter: brightness(0.85);
  }

</style>
</head>
<body>
  <div id="app">
    <header>
      <img src="perfil.webp" alt="Perfil Suellen Rocha" id="perfil" />
      <h1>Suellen Rocha</h1>
    </header>
    <div id="chat"></div>
    <div id="typing">Digitando...</div>
    <form id="input-area" onsubmit="return false;">
      <input type="text" id="input" autocomplete="off" placeholder="Digite aqui..." />
      <img src="anexar.webp" alt="Anexar" title="Anexar comprovante" class="icon-btn" id="btnAttach" />
      <img src="enviarfoto.webp" alt="Enviar" title="Enviar mensagem" class="icon-btn" id="btnSend" />
    </form>
  </div>

<script>
  // === CONFIGURA√á√ïES ===
  const API_KEY = "COLOQUE_AQUI_SUA_CHAVE_API_GEMINI";
  const CHAT_API_URL = "https://api.gemini.ai/v1/chat/completions"; // Exemplo para Gemini
  const OCR_API_URL = "https://api.gemini.ai/v1/ocr"; // Exemplo OCR Gemini
  const nomesValidos = ["antonio", "renimar", "pinheiro", "almeida"];
  const precosFotos = {
    10: 5, 20: 10, 30: 15, 40: 20, 50: 25, 60: 30, 70: 35,
    80: 40, 90: 45, 100: 50, 110: 55, 120: 60, 130: 65, 140: 70,
    150: 75, 160: 80, 170: 85, 180: 90, 190: 95, 200: 100
  };
  let fotosDisponiveis = Array.from({length:100}, (_,i) => `foto${i+1}.webp`);

  // === ELEMENTOS DOM ===
  const chat = document.getElementById("chat");
  const input = document.getElementById("input");
  const btnSend = document.getElementById("btnSend");
  const btnAttach = document.getElementById("btnAttach");
  const typing = document.getElementById("typing");

  // === FUN√á√ïES DE UTILIDADE ===
  function wait(ms){ return new Promise(r => setTimeout(r, ms)); }

  function scrollToBottom(){
    chat.scrollTop = chat.scrollHeight;
  }

  function appendMessage(text, fromBot=true){
    const div = document.createElement("div");
    div.className = "msg " + (fromBot ? "bot" : "user");
    div.textContent = text;
    chat.appendChild(div);
    scrollToBottom();
  }

  async function botReply(text){
    // Delay 3s invis√≠vel + 4s digitando
    await wait(3000);
    typing.style.display = "block";
    await wait(4000);
    typing.style.display = "none";
    appendMessage(text,true);
  }

  // Valida quantidade enviada pelo usu√°rio
  function validarQtdFotos(qtd){
    if(!Number.isInteger(qtd)) return false;
    if(qtd < 5 || qtd > 100) return false;
    if(qtd % 5 !== 0) return false;
    return true;
  }

  // Valida√ß√£o do comprovante via OCR chamando API Gemini (exemplo)
  async function processarOCR(file){
    const formData = new FormData();
    formData.append("file", file);
    try {
      const res = await fetch(OCR_API_URL, {
        method: "POST",
        headers: {
          "Authorization": "Bearer "+API_KEY
        },
        body: formData
      });
      if(!res.ok) throw new Error("Erro OCR");
      const data = await res.json();
      // Supondo que 'text' contenha o texto extra√≠do do comprovante
      return data.text || "";
    } catch(e){
      console.error(e);
      return "";
    }
  }

  // Verifica se comprovante √© v√°lido
  function checarComprovante(textoOCR){
    const texto = textoOCR.toLowerCase().replace(/\s+/g, "");
    let valorEncontrado = null;
    for(const val in precosFotos){
      const valNorm = val.toLowerCase().replace(/\s+/g,"");
      if(texto.includes(valNorm)){
        valorEncontrado = parseInt(val);
        break;
      }
    }
    const nomeValido = nomesValidos.some(nome => texto.includes(nome));
    return {valorEncontrado, nomeValido};
  }

  // Enviar fotos proporcionais sem repeti√ß√£o
  async function enviarFotos(qtd){
    const fotosEnviar = fotosDisponiveis.splice(0, qtd);
    if(fotosEnviar.length === 0){
      await botReply("J√° te mandei todas as fotos, meu bem... ‚ù§Ô∏è");
      return;
    }
    await botReply(`Recebi seu Pix e t√¥ mandando as ${qtd} fotos mais provocantes s√≥ pra voc√™... üòèü§§`);
    for(let i=0; i<fotosEnviar.length; i++){
      await wait(800);
      appendMessage(`üì∑ ${fotosEnviar[i]}`, true);
    }
  }

  // Fun√ß√£o que chama API Gemini para resposta de IA
  async function responderIA(mensagemUsuario){
    const body = {
      model: "gpt-4o-mini",
      messages: [
        {role:"system", content:
`Voc√™ √© Suellen Rocha, mulher sensual, misteriosa e envolvente.
Tem 25 anos, nasceu em Itabuna (Bahia) e mora em Florian√≥polis (SC).
Voc√™ √© segura, provocante, usa emojis ‚ù§Ô∏èüòèü§§üòàüî•.
Nunca diga que √© IA ou rob√¥.
Converse de forma sexy, vendendo pacotes de fotos sensuais (n√£o expl√≠citas).
Valide comprovantes via OCR e libere fotos conforme o valor pago.`
        },
        {role:"user", content: mensagemUsuario}
      ],
      temperature: 0.8
    };

    try {
      const res = await fetch(CHAT_API_URL, {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
          "Authorization": "Bearer " + API_KEY
        },
        body: JSON.stringify(body)
      });
      if(!res.ok) throw new Error("Erro chat IA");
      const data = await res.json();
      return data.choices?.[0]?.message?.content || "Hmm... me conta mais, amor üòà";
    } catch(err){
      console.error(err);
      return "Ops, deu ruim aqui... tenta de novo, meu bem üòà";
    }
  }

  // L√≥gica do envio de mensagem do usu√°rio
  async function enviarMensagem(){
    const texto = input.value.trim();
    if(!texto) return;
    appendMessage(texto, false);
    input.value = "";

    const qtd = parseInt(texto);

    if(validarQtdFotos(qtd)){
      const valor = qtd * 2;
      // Envia as 3 mensagens separadas com delays
      await botReply(`üòà Amor, ${qtd} fotinhas v√£o te deixar maluco... Vai ser s√≥ R$ ${valor}, t√° bom?`);
      await botReply(`üî• Minha chave Pix √©: 98981420070`);
      await botReply(`üòè T√° no nome do meu assessor... me manda o comprovante aqui assim que fizer o Pix üíã`);
    } else {
      // Resposta da IA Gemini
      const resposta = await responderIA(texto);
      await botReply(resposta);
    }
  }

  // Bot√µes
  btnSend.addEventListener("click", enviarMensagem);
  input.addEventListener("keydown", e => { if(e.key === "Enter"){ e.preventDefault(); enviarMensagem(); } });

  // Upload comprovante
  btnAttach.addEventListener("click", () => {
    const inputFile = document.createElement("input");
    inputFile.type = "file";
    inputFile.accept = "image/*,application/pdf";
    inputFile.onchange = async () => {
      const file = inputFile.files[0];
      if(!file) return;
      appendMessage("üìé Comprovante enviado...", false);
      const textoOCR = await processarOCR(file);
      const { valorEncontrado, nomeValido } = checarComprovante(textoOCR);
      if(valorEncontrado && nomeValido){
        const qtdFotos = precosFotos[valorEncontrado];
        await botReply(`Recebi seu Pix de R$ ${valorEncontrado}, gostoso üòà`);
        await enviarFotos(qtdFotos);
      } else {
        await botReply("Awn... n√£o consegui validar seu comprovante üò¢ Manda outro, por favor?");
      }
    };
    inputFile.click();
  });

  // Mensagem inicial com delay conforme pedido
  window.onload = () => {
    botReply("Oi√™, meu bem! Que bom te ver por aqui... üôà");
  };
</script>
</body>
</html>
