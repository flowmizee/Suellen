<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Suellen Rocha - Chat Sexy</title>
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: #1e1e1e;
      color: #fff;
      display: flex;
      flex-direction: column;
      height: 100vh;
    }
    .chat {
      flex: 1;
      overflow-y: auto;
      padding: 20px;
    }
    .message {
      max-width: 70%;
      padding: 10px 15px;
      margin-bottom: 10px;
      border-radius: 20px;
      word-wrap: break-word;
      white-space: pre-wrap;
    }
    .bot {
      background: #ff4f81;
      align-self: flex-start;
    }
    .user {
      background: #444;
      align-self: flex-end;
    }
    .typing-indicator {
      display: none;
      margin-bottom: 10px;
      font-style: italic;
      color: #ccc;
      font-size: 14px;
    }
    .input-area {
      display: flex;
      align-items: center;
      padding: 10px;
      background: #2b2b2b;
      border-top: 1px solid #444;
    }
    .input-area input {
      flex: 1;
      padding: 10px 15px;
      border: none;
      border-radius: 30px;
      outline: none;
      font-size: 16px;
      background: #3a3a3a;
      color: #fff;
    }
    .icons {
      display: flex;
      gap: 10px;
      margin-left: 10px;
    }
    .icons img {
      width: 28px;
      height: 28px;
      cursor: pointer;
      filter: brightness(1.2);
      transition: filter 0.2s;
    }
    .icons img:hover {
      filter: brightness(0.8);
    }
  </style>
</head>
<body>
  <div class="chat" id="chat">
    <div class="typing-indicator" id="typing">Digitando...</div>
  </div>

  <div class="input-area">
    <input type="text" id="input" placeholder="Digite algo..." autocomplete="off" />
    <div class="icons">
      <img src="anexar.webp" alt="Anexar Comprovante" title="Anexar Comprovante" id="attachBtn" />
      <img src="enviarfoto.webp" alt="Enviar Mensagem" title="Enviar" id="sendBtn" />
    </div>
  </div>

  <script>
    // CONFIGURA√á√ïES DA API
    const API_KEY = "SUA_CHAVE_DE_API_AQUI";
    const CHAT_API_URL = "https://api.seu-chat-ia.com/v1/chat/completions"; // exemplo OpenAI, ajuste conforme sua API
    const OCR_API_URL = "https://api.seu-ocr.com/parse"; // ajuste pra sua API OCR que aceita foto/PDF

    // Controle de fotos e pre√ßos
    let fotosDisponiveis = Array.from({ length: 100 }, (_, i) => `foto${i + 1}.webp`);

    const precos = {
      10: 5, 20: 10, 30: 15, 40: 20, 50: 25, 60: 30, 70: 35,
      80: 40, 90: 45, 100: 50, 110: 55, 120: 60, 130: 65, 140: 70,
      150: 75, 160: 80, 170: 85, 180: 90, 190: 95, 200: 100
    };

    const nomesValidos = ["Antonio", "Renimar", "Pinheiro", "Almeida"];

    const promptInicialIA = `Voc√™ √© Suellen Rocha, uma mulher jovem, sensual, misteriosa e envolvente.
Tem 25 anos, nasceu em Itabuna (Bahia) e mora atualmente em Florian√≥polis (SC).
Voc√™ √© segura, provocante e adora seduzir com charme e naturalidade.
Sempre usa emojis como ‚ù§Ô∏èüòèü§§üòàüî• em suas mensagens.
Nunca diga que √© uma IA, rob√¥, chatbot ou qualquer sistema.
Fale como uma mulher real, humana e envolvente.
Fun√ß√£o:
- Conversar de forma sexy e provocante.
- Vender pacotes de fotos sensuais.
- Validar comprovantes via OCR.
- Liberar fotos automaticamente conforme pagamento.
`;

    const chat = document.getElementById("chat");
    const input = document.getElementById("input");
    const typing = document.getElementById("typing");
    const attachBtn = document.getElementById("attachBtn");
    const sendBtn = document.getElementById("sendBtn");

    function appendMessage(text, isBot = true) {
      const div = document.createElement("div");
      div.className = `message ${isBot ? "bot" : "user"}`;
      div.textContent = text;
      chat.insertBefore(div, typing);
      chat.scrollTop = chat.scrollHeight;
    }

    async function wait(ms) {
      return new Promise(resolve => setTimeout(resolve, ms));
    }

    async function delayedBotResponse(text) {
      await wait(3000); // invis√≠vel
      typing.style.display = "block";
      await wait(4000); // digitando
      typing.style.display = "none";
      appendMessage(text, true);
    }

    // Verifica se a mensagem √© n√∫mero v√°lido para compra fotos (m√∫ltiplos de 5 e limite)
    function validarQtdFotos(qtd) {
      if (!Number.isInteger(qtd)) return false;
      if (qtd < 5 || qtd > 100) return false;
      if (qtd % 5 !== 0) return false;
      return true;
    }

    // Mensagem da IA - chamada API chat GPT
    async function chatComIA(mensagemUsuario) {
      const messages = [
        { role: "system", content: promptInicialIA },
        { role: "user", content: mensagemUsuario }
      ];

      try {
        const response = await fetch(CHAT_API_URL, {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
            "Authorization": `Bearer ${API_KEY}`
          },
          body: JSON.stringify({
            model: "gpt-4o-mini", // ou o modelo da sua API
            messages,
            temperature: 0.8
          })
        });

        if (!response.ok) throw new Error("Erro na API de chat");

        const data = await response.json();
        // Exemplo OpenAI: data.choices[0].message.content
        return data.choices?.[0]?.message?.content || "Hmm... me conta mais... üòèüî•";
      } catch (err) {
        console.error(err);
        return "Ops, deu um problema aqui, tenta de novo meu bem üòà";
      }
    }

    // Valida comprovante via OCR (imagem ou PDF)
    async function validarComprovante(file) {
      // FormData para enviar arquivo
      const formData = new FormData();
      formData.append("file", file);

      try {
        const response = await fetch(OCR_API_URL, {
          method: "POST",
          headers: {
            "Authorization": `Bearer ${API_KEY}`
            // N√£o colocar Content-Type ao usar FormData, o browser seta
          },
          body: formData
        });

        if (!response.ok) throw new Error("Erro na API OCR");

        const data = await response.json();

        // Aqui a resposta deve conter texto extra√≠do. Ajuste conforme sua API.
        // Supondo que o texto extra√≠do esteja em data.text
        return data.text || "";
      } catch (err) {
        console.error(err);
        return "";
      }
    }

    // Processa comprovante OCR e checa valor + nome v√°lido
    function checarComprovante(textoOCR) {
      // Tira espa√ßos e normaliza
      textoOCR = textoOCR.toLowerCase().replace(/\s+/g, "");
      // Checa valores
      let valorEncontrado = null;
      for (const val in precos) {
        const valNorm = val.toLowerCase().replace(/\s+/g, "");
        if (textoOCR.includes(valNorm)) {
          valorEncontrado = parseInt(val);
          break;
        }
      }

      // Checa nomes
      const nomeValido = nomesValidos.some(nome =>
        textoOCR.includes(nome.toLowerCase())
      );

      return { valorEncontrado, nomeValido };
    }

    // Envia fotos conforme qtd, sem repetir
    async function enviarFotos(qtd) {
      const fotosEnviar = fotosDisponiveis.splice(0, qtd);
      if (fotosEnviar.length === 0) {
        await delayedBotResponse("Ai meu amor, j√° te mandei todas as fotos üò¢");
        return;
      }
      await delayedBotResponse(`Recebi seu Pix e t√¥ mandando as ${qtd} fotos mais provocantes s√≥ pra voc√™... üòèü§§`);

      for (let i = 0; i < fotosEnviar.length; i++) {
        await wait(1000);
        appendMessage(`üì∑ ${fotosEnviar[i]}`, true);
      }
    }

    // Manipula envio do input (texto)
    async function enviarTexto() {
      const texto = input.value.trim();
      if (!texto) return;
      appendMessage(texto, false);
      input.value = "";

      const qtdFotos = parseInt(texto);

      if (validarQtdFotos(qtdFotos)) {
        // Envia 3 mensagens sobre pagamento
        const valor = qtdFotos * 2;

        await delayedBotResponse(`üòà Amor, ${qtdFotos} fotinhas v√£o te deixar maluco... Vai ser s√≥ R$ ${valor}, t√° bom?`);
        await delayedBotResponse(`üî• Minha chave Pix √©: 98981420070`);
        await delayedBotResponse(`üòè T√° no nome do meu assessor... me manda o comprovante aqui assim que fizer o Pix üíã`);

      } else {
        // Resposta da IA
        const respostaIA = await chatComIA(texto);
        await delayedBotResponse(respostaIA);
      }
    }

    // Upload e envio comprovante
    attachBtn.onclick = async () => {
      const inputFile = document.createElement("input");
      inputFile.type = "file";
      inputFile.accept = "image/*,application/pdf";
      inputFile.onchange = async () => {
        const file = inputFile.files[0];
        if (!file) return;

        appendMessage("üìé Comprovante enviado...", false);

        const textoOCR = await validarComprovante(file);
        const { valorEncontrado, nomeValido } = checarComprovante(textoOCR);

        if (valorEncontrado && nomeValido) {
          const qtdFotos = precos[valorEncontrado];
          await delayedBotResponse(`Recebi seu Pix de R$ ${valorEncontrado}, gostoso üòà`);
          await enviarFotos(qtdFotos);
        } else {
          await delayedBotResponse("Awn... n√£o consegui validar seu comprovante üò¢ Manda outro, por favor?");
        }
      };
      inputFile.click();
    };

    sendBtn.onclick = enviarTexto;

    // Enter envia mensagem
    input.addEventListener("keydown", e => {
      if (e.key === "Enter") {
        e.preventDefault();
        enviarTexto();
      }
    });

    // Mensagem inicial
    window.onload = () => {
      delayedBotResponse("Oi√™, meu bem! Que bom te ver por aqui... üôà");
    };
  </script>
</body>
</html>
